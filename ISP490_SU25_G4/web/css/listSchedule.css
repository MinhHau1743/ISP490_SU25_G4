/*
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/CascadeStyleSheet.css to edit this template
*/
/* 
    Created on : Jul 16, 2025, 10:51:49 PM
    Author     : NGUYEN MINH
*/
html, body {
    height: 100%;
    font-family: 'Inter', sans-serif;
    margin: 0;
}
.content-wrapper {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    overflow: hidden;
}
.main-content-body {
    position: relative;
    flex-grow: 1;
    padding: 24px 32px;
}

/* ======================================================== */
/* 1. CSS CHUNG & TOOLBAR                                   */
/* ======================================================== */
.calendar-toolbar {
    display: flex;
    align-items: center;
    margin-bottom: 24px;
    flex-wrap: wrap;
    gap: 16px;
}
.calendar-toolbar .title {
    font-size: 22px;
    font-weight: 600;
    color: #333;
    margin: 0;
    margin-right: 20px;
}
.view-toggle {
    display: flex;
    background-color: #e0f2f1;
    border-radius: 8px;
    padding: 4px;
}
.view-toggle .btn-toggle {
    padding: 8px 16px;
    border: none;
    background-color: transparent;
    border-radius: 6px;
    font-weight: 500;
    cursor: pointer;
    color: #555;
    transition: all 0.2s ease-in-out;
}
.view-toggle .btn-toggle.active {
    background-color: #fff;
    color: #009688;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

/* Date Navigation Styles */
.date-nav {
    display: flex;
    align-items: center;
    gap: 8px;
    background-color: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 4px;
    margin-left: 16px;
}
.date-nav .date-range {
    font-weight: 500;
    padding: 0 12px;
    font-size: 14px;
    color: #333;
    min-width: 120px;
    text-align: center;
}
.date-nav .btn-nav {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px;
    border: 1px solid transparent;
    border-radius: 6px;
    background-color: transparent;
    cursor: pointer;
    color: #555;
    transition: all 0.2s ease-in-out;
}
.date-nav .btn-nav:hover {
    background-color: #f0f0f0;
    color: #333;
}
.date-nav .btn-nav i {
    width: 16px;
    height: 16px;
}

/* Hide date navigation in list view */
.date-nav.hidden {
    display: none !important;
}

.week-nav {
    display: flex;
    align-items: center;
    gap: 8px;
    background-color: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 4px;
}
.week-nav .date-range {
    font-weight: 500;
    padding: 0 12px;
    font-size: 14px;
    color: #333;
}
.week-nav .btn-nav {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px;
    border: 1px solid transparent;
    border-radius: 6px;
    background-color: transparent;
    cursor: pointer;
}
.week-nav .btn-nav:hover {
    background-color: #f0f0f0;
}
.toolbar-spacer {
    flex-grow: 1;
}
.btn-primary {
    background-color: #8B4513;
    color: white;
    border: 1px solid #8B4513;
    gap: 8px;
    padding: 10px 16px;
    border-radius: 8px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    font-weight: 500;
}
.btn-primary:hover {
    background-color: #6a360f;
}
.calendar-view {
    display: none;
}
.calendar-view.active {
    display: block;
}
#week-view .time-label,
#week-view .all-day-slot,
#week-view .time-slot {
    height: 40px;
    line-height: 40px;
}

/* ======================================================== */
/* 2. CSS CHO LỊCH THEO TUẦN (WEEK VIEW)                    */
/* ======================================================== */
#week-view .calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 12px;
    grid-auto-rows: 40px;
    height: calc(100vh - 230px);
}
#week-view .calendar-day {
    background-color: #fdfdfd;
    border: 1px solid #f0f0f0;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}
#week-view .day-header {
    height: 60px; /* <-- Đặt chiều cao cố định bạn muốn ở đây */

    /* Các thuộc tính để căn giữa nội dung */
    display: flex;
    flex-direction: column;
    justify-content: center; /* Căn giữa theo chiều dọc */
    align-items: center;     /* Căn giữa theo chiều ngang */

    /* Các thuộc tính cũ */
    padding: 0 8px; /* Bỏ padding dọc */
    border-bottom: 1px solid #f0f0f0;
    background-color: #f9f9f9;
}
#week-view .day-header h3 {
    margin: 0 0 2px 0;
    font-size: 13px;
    font-weight: 600;
}
#week-view .day-header p {
    margin: 0;
    font-size: 12px;
    color: #777;
}
#week-view .day-body {
    padding: 12px;
    flex-grow: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 12px;
}
#week-view .time-slot,
#week-view .all-day-slot {
    display: flex;
    flex-direction: row; /* Xếp các event theo chiều ngang */
    gap: 2px;            /* Khoảng cách nhỏ giữa các event */
    padding: 2px;
    align-items: flex-start;
    overflow: visible;
}
#week-view .time-grid {
    display: grid;
    grid-template-columns: auto repeat(7, 1fr);
    grid-auto-rows: 40px;       /* MỖI DÒNG LUÔN CAO 40px */
    border-top: 1px solid #bbb;
    position: relative;
}

/* 2. Bỏ chiều cao CỐ ĐỊNH của các ô và nhãn giờ để chúng co giãn theo hàng */
#week-view .time-label,
#week-view .time-slot,
#week-view .all-day-slot {
    height: auto; /* Quan trọng: Bỏ chiều cao cố định */
    line-height: normal; /* Cho phép text hiển thị tự nhiên */
}
#week-view .time-slot,
#week-view .all-day-slot {
    display: flex;
    flex-direction: row;
    gap: 2px;
    padding: 2px;
    align-items: flex-start;
    min-height: 40px;
    height: auto;      /* Bỏ fix height, cho tự giãn */
    box-sizing: border-box;
    flex-wrap: wrap;   /* Nếu nhiều event sẽ xuống dòng */
    flex-grow: 0;      /* Không để slot/phần tử co dãn vượt nội dung */
    flex-shrink: 0;
    border-right: 1px solid #ddd;     /* vạch kẻ giữa các ngày */
    border-bottom: 1px solid #ddd;    /* vạch kẻ ngang */
}
#week-view .time-slot:last-child,
#week-view .all-day-slot:last-child {
    border-right: none;
}

/* 3. Căn chỉnh lại hàng tiêu đề ngày (day-header-row) */
/* Việc làm cho header dãn theo các hàng bên dưới là rất khó với cấu trúc HTML hiện tại.
   Thay vào đó, chúng ta sẽ cho hàng "Cả ngày" một chiều cao tối thiểu lớn hơn một chút
   để giao diện cân đối và đồng bộ với ô góc trên bên trái. */


/* Đồng bộ chiều cao ô góc trên bên trái với hàng "Cả ngày" */
#week-view .day-header-row .day-header-cell:first-child {
    height: 40px;
}
/* Giảm padding của các header khác để chúng trông gọn gàng hơn */
#week-view .day-header-cell {
    padding-top: 8px;
    padding-bottom: 8px;
}

/* --- KẾT THÚC --- */
#week-view .event {
    position: relative;
    top: auto;
    left: auto;
    right: auto;

    /* CHỈNH SỬA: Để event co chia đều chiều ngang */
    min-width: 0;     /* Cho phép event thu nhỏ */
    width: auto;      /* Không fix width 100% */
    max-width: none;  /* Không ép cứng chiều ngang */

    /* Nếu dùng flex, event sẽ tự động chia đều ngang */
    flex: 1 1 0;      /* Mỗi event chiếm đều không gian trong slot */

    /* Cho phép text xuống dòng nếu dài */
    white-space: normal;

    /* Chiều cao động dựa trên JS (getEventHeight), hoặc mặc định tối thiểu */
    height: auto;
    min-height: 40px;

    padding: 4px 6px;
    margin: 2px 2px;

    font-size: 14px;
    border-radius: 4px;
    background: var(--event-bg, #2196f3);
    color: #fff;

    box-sizing: border-box;
    overflow: hidden;
    text-overflow: ellipsis;
}
#week-view .time-slot {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: flex-start;
    padding: 2px 0;
    position: relative;
}


/* --- KẾT THÚC --- */
#week-view .time-slot:has(.event:nth-child(3)) .event,
#week-view .all-day-slot:has(.event:nth-child(3)) .event {
    max-width: calc(33.333% - 2px);
}

/* Nếu có 4 event, mỗi event chiếm 25% */
#week-view .time-slot:has(.event:nth-child(4)) .event,
#week-view .all-day-slot:has(.event:nth-child(4)) .event {
    max-width: calc(25% - 2px);
}

/* 4. Responsive: Trên màn hình nhỏ, cho phép xuống hàng */
@media (max-width: 768px) {
    #week-view .time-slot,
    #week-view .all-day-slot {
        flex-direction: column; /* Xếp dọc trên màn hình nhỏ */
    }


}
.maintenance-card {
    background-color: white;
    border-radius: 6px;
    padding: 12px;
    border-left: 5px solid #ccc;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    position: relative;
    cursor: pointer;
    transition: box-shadow 0.2s;
}
.maintenance-card:hover {
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
.card-content .title {
    font-weight: 600;
    font-size: 14px;
    margin: 0 0 6px 0;
    color: #333;
}
.card-content .info {
    font-size: 12px;
    color: #666;
    margin: 3px 0;
    display: flex;
    align-items: center;
    gap: 6px;
}
.maintenance-card.status-upcoming {
    border-color: #ffa000;
}
.maintenance-card.status-inprogress {
    border-color: #1565c0;
}
.maintenance-card.status-completed {
    border-color: #2e7d32;
}
.maintenance-card.status-cancelled {
    border-color: #9E9E9E;
}
.card-actions {
    position: absolute;
    top: 8px;
    right: 8px;
    display: flex;
    gap: 6px;
    opacity: 0;
    transition: opacity 0.2s;
}
.maintenance-card:hover .card-actions {
    opacity: 1;
}
.card-actions a {
    color: #555;
    background-color: rgba(245, 245, 245, 0.9);
    padding: 5px;
    border-radius: 50%;
    display: flex;
    border: 1px solid #eee;
    cursor: pointer;
}
.card-actions .feather {
    width: 14px;
    height: 14px;
}

/* ======================================================== */
/* 3. CSS CHO LỊCH THEO THÁNG (MONTH VIEW)                  */
/* ======================================================== */



/* ======================================================== */
/* 4. CSS CHO POPOVER & MODAL XÓA                          */
/* ======================================================== */
#month-task-popover {
    display: none;
    position: absolute;
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 1010;
    padding: 6px;
    width: 180px;
}
.popover-action {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    text-decoration: none;
    color: #333;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
}
.popover-action:hover {
    background-color: #f5f5f5;
}
.popover-action.delete {
    color: #c81e1e;
}
.popover-action.delete:hover {
    background-color: #fbebeb;
}
/* ==== KHÓA CỘT WEEK VIEW KHÔNG BỊ XÊ DỊCH ==== */



/* Cho phép nội dung trong 7 cột ngày thu nhỏ, không đẩy giãn cột */
#week-view .time-slot,
#week-view .all-day-slot,
#week-view .day-header-cell{
  min-width: 0 !important;     /* quan trọng để không bị “đội cột” */
  text-overflow: ellipsis;
}

/* Sự kiện bên trong cũng không được đẩy giãn cột */
#week-view .event{
  min-width: 0 !important;
}

/* Nếu trước đó có đặt flex-wrap: nowrap gây đùn ngang, bỏ nó đi */
#week-view .time-slot,
#week-view .all-day-slot{
  flex-wrap: wrap !important;   /* nhiều event sẽ xuống dòng, không đẩy giãn cột */
}
